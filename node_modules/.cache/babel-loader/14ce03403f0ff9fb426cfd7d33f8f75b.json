{"remainingRequest":"/home/rodrigo/OvideoProject/ovideo-frontend/node_modules/babel-loader/lib/index.js!/home/rodrigo/OvideoProject/ovideo-frontend/node_modules/eslint-loader/index.js??ref--13-0!/home/rodrigo/OvideoProject/ovideo-frontend/src/router.js","dependencies":[{"path":"/home/rodrigo/OvideoProject/ovideo-frontend/src/router.js","mtime":1573125771683},{"path":"/home/rodrigo/OvideoProject/ovideo-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/rodrigo/OvideoProject/ovideo-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/rodrigo/OvideoProject/ovideo-frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.split\";\nimport Vue from \"vue\";\nimport Router from \"vue-router\";\nimport Index from \"./views/Index.vue\";\nimport Landing from \"./views/Landing.vue\";\nimport Login from \"./views/Login.vue\";\nimport SignIn from \"./views/SignIn.vue\";\nimport Profile from \"./views/Profile.vue\";\nimport MainNavbar from \"./layout/MainNavbar.vue\";\nimport MainFooter from \"./layout/MainFooter.vue\";\nimport Categoria from \"./views/myComponents/Categorias.vue\";\nimport Detalhes from \"./views/myComponents/DetalhesItem.vue\";\nimport FormCadastro from \"./views/myComponents/FormCadastroArtista.vue\";\nimport CadastroArtista from \"./views/myComponents/CadastroArtista.vue\";\nimport MainHeader from \"./layout/MainHeader.vue\";\nimport axios from \"axios\";\naxios.defaults.baseURL = process.env.VUE_APP_API_URL;\nvar router = null;\n\nfunction authenticated(to, from, next) {\n  if (localStorage.getItem(\"token\") != null) {\n    var formData = new FormData();\n    var token = localStorage.getItem(\"token\").split(\" \");\n    formData.append('token', token[1]);\n    axios.post('/security', formData).then(function (response) {\n      axios.post('/security/obter-perfil', formData).then(function (response) {\n        var artist = response.data.filter(function (role) {\n          return role.authority == \"ROLE_ARTISTA\";\n        });\n\n        if (artist.length > 0) {\n          if (to.name == \"login\") {\n            next(\"/profile\");\n          }\n\n          next();\n        } else {\n          if (to.name == \"profile\") {\n            next(\"/categorias\");\n          }\n\n          next();\n        }\n      });\n    }).catch(function () {\n      next(\"/login\");\n      localStorage.removeItem(\"token\");\n    });\n  } else {\n    if (to.name != \"login\") {\n      next(\"/login\");\n      localStorage.removeItem(\"token\");\n    }\n\n    next();\n  }\n}\n\nVue.use(Router);\nrouter = new Router({\n  mode: 'history',\n  routes: [{\n    path: \"/cadastrar-artista\",\n    name: \"CadastroArtista\",\n    components: {\n      default: CadastroArtista\n    }\n  }, {\n    path: \"/finalize-seu-cadastro/:id\",\n    name: \"formulario\",\n    components: {\n      default: FormCadastro,\n      header: MainHeader,\n      footer: MainFooter\n    }\n  }, {\n    path: \"/detalhes/:id\",\n    name: \"detalhes\",\n    components: {\n      header: MainHeader,\n      default: Detalhes\n    }\n  }, {\n    path: \"/categorias\",\n    name: \"categorias\",\n    components: {\n      header: MainHeader,\n      default: Categoria,\n      footer: MainFooter\n    }\n  }, {\n    path: \"/\",\n    name: \"index\",\n    components: {\n      default: Index,\n      header: MainNavbar,\n      footer: MainFooter\n    },\n    props: {\n      header: {\n        colorOnScroll: 400\n      },\n      footer: {\n        backgroundColor: \"black\"\n      }\n    }\n  }, {\n    path: \"/landing\",\n    name: \"landing\",\n    components: {\n      default: Landing,\n      header: MainNavbar,\n      footer: MainFooter\n    },\n    props: {\n      header: {\n        colorOnScroll: 400\n      },\n      footer: {\n        backgroundColor: \"black\"\n      }\n    }\n  }, {\n    path: \"/login\",\n    name: \"login\",\n    beforeEnter: authenticated,\n    components: {\n      default: Login\n    }\n  }, {\n    path: \"/inscrever-se\",\n    name: \"inscrever-se\",\n    components: {\n      default: SignIn\n    }\n  }, {\n    path: \"/profile\",\n    name: \"profile\",\n    components: {\n      header: MainHeader,\n      default: Profile\n    },\n    beforeEnter: authenticated,\n    props: {}\n  }, {\n    path: \"/profile/orders\",\n    name: \"orders\",\n    components: {\n      header: MainHeader,\n      default: Profile\n    },\n    beforeEnter: authenticated,\n    props: {}\n  }, {\n    path: \"/profile/videos\",\n    name: \"videos\",\n    components: {\n      header: MainHeader,\n      default: Profile\n    },\n    beforeEnter: authenticated,\n    props: {}\n  }],\n  scrollBehavior: function scrollBehavior(to) {\n    if (to.hash) {\n      return {\n        selector: to.hash\n      };\n    } else {\n      return {\n        x: 0,\n        y: 0\n      };\n    }\n  }\n});\nexport default router;",{"version":3,"sources":["/home/rodrigo/OvideoProject/ovideo-frontend/src/router.js"],"names":["Vue","Router","Index","Landing","Login","SignIn","Profile","MainNavbar","MainFooter","Categoria","Detalhes","FormCadastro","CadastroArtista","MainHeader","axios","defaults","baseURL","process","env","VUE_APP_API_URL","router","authenticated","to","from","next","localStorage","getItem","formData","FormData","token","split","append","post","then","response","artist","data","filter","role","authority","length","name","catch","removeItem","use","mode","routes","path","components","default","header","footer","props","colorOnScroll","backgroundColor","beforeEnter","scrollBehavior","hash","selector","x","y"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,KAAP;AACA,OAAOC,OAAP;AACA,OAAOC,KAAP;AACA,OAAOC,MAAP;AACA,OAAOC,OAAP;AACA,OAAOC,UAAP;AACA,OAAOC,UAAP;AACA,OAAOC,SAAP;AACA,OAAOC,QAAP;AACA,OAAOC,YAAP;AACA,OAAOC,eAAP;AACA,OAAOC,UAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEAA,KAAK,CAACC,QAAN,CAAeC,OAAf,GAAyBC,OAAO,CAACC,GAAR,CAAYC,eAArC;AAEA,IAAIC,MAAM,GAAG,IAAb;;AAEA,SAASC,aAAT,CAAuBC,EAAvB,EAA2BC,IAA3B,EAAiCC,IAAjC,EAAsC;AACpC,MAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC,IAApC,EAAyC;AACvC,QAAIC,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACA,QAAIC,KAAK,GAAIJ,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BI,KAA9B,CAAoC,GAApC,CAAb;AACAH,IAAAA,QAAQ,CAACI,MAAT,CAAgB,OAAhB,EAAyBF,KAAK,CAAC,CAAD,CAA9B;AAEAf,IAAAA,KAAK,CAACkB,IAAN,CAAW,WAAX,EAAwBL,QAAxB,EAAkCM,IAAlC,CAAuC,UAAAC,QAAQ,EAAE;AAC/CpB,MAAAA,KAAK,CAACkB,IAAN,CAAW,wBAAX,EAAqCL,QAArC,EAA+CM,IAA/C,CAAoD,UAAAC,QAAQ,EAAE;AAC5D,YAAIC,MAAM,GAAGD,QAAQ,CAACE,IAAT,CAAcC,MAAd,CAAsB,UAAAC,IAAI,EAAE;AACvC,iBAAOA,IAAI,CAACC,SAAL,IAAkB,cAAzB;AACD,SAFY,CAAb;;AAIA,YAAGJ,MAAM,CAACK,MAAP,GAAgB,CAAnB,EAAqB;AACnB,cAAGlB,EAAE,CAACmB,IAAH,IAAW,OAAd,EAAsB;AACpBjB,YAAAA,IAAI,CAAC,UAAD,CAAJ;AACD;;AACDA,UAAAA,IAAI;AACL,SALD,MAKK;AACH,cAAGF,EAAE,CAACmB,IAAH,IAAW,SAAd,EAAwB;AACtBjB,YAAAA,IAAI,CAAC,aAAD,CAAJ;AACD;;AAEDA,UAAAA,IAAI;AACL;AACF,OAjBD;AAkBD,KAnBD,EAmBGkB,KAnBH,CAmBS,YAAI;AACXlB,MAAAA,IAAI,CAAC,QAAD,CAAJ;AACAC,MAAAA,YAAY,CAACkB,UAAb,CAAwB,OAAxB;AACD,KAtBD;AAuBD,GA5BD,MA4BK;AACH,QAAGrB,EAAE,CAACmB,IAAH,IAAW,OAAd,EAAsB;AACpBjB,MAAAA,IAAI,CAAC,QAAD,CAAJ;AACAC,MAAAA,YAAY,CAACkB,UAAb,CAAwB,OAAxB;AACD;;AAEDnB,IAAAA,IAAI;AACL;AACF;;AAEDxB,GAAG,CAAC4C,GAAJ,CAAQ3C,MAAR;AAECmB,MAAM,GAAG,IAAInB,MAAJ,CAAW;AACnB4C,EAAAA,IAAI,EAAC,SADc;AAEnBC,EAAAA,MAAM,EAAE,CACN;AACEC,IAAAA,IAAI,EAAE,oBADR;AAEEN,IAAAA,IAAI,EAAE,iBAFR;AAGEO,IAAAA,UAAU,EAAE;AACVC,MAAAA,OAAO,EAAErC;AADC;AAHd,GADM,EAQN;AACEmC,IAAAA,IAAI,EAAE,4BADR;AAEEN,IAAAA,IAAI,EAAE,YAFR;AAGEO,IAAAA,UAAU,EAAE;AACVC,MAAAA,OAAO,EAAEtC,YADC;AAEVuC,MAAAA,MAAM,EAACrC,UAFG;AAGVsC,MAAAA,MAAM,EAAC3C;AAHG;AAHd,GARM,EAiBN;AACEuC,IAAAA,IAAI,EAAE,eADR;AAEEN,IAAAA,IAAI,EAAE,UAFR;AAGEO,IAAAA,UAAU,EAAE;AACVE,MAAAA,MAAM,EAACrC,UADG;AAEVoC,MAAAA,OAAO,EAAEvC;AAFC;AAHd,GAjBM,EAyBN;AACEqC,IAAAA,IAAI,EAAE,aADR;AAEEN,IAAAA,IAAI,EAAE,YAFR;AAGEO,IAAAA,UAAU,EAAE;AACVE,MAAAA,MAAM,EAACrC,UADG;AAEVoC,MAAAA,OAAO,EAAExC,SAFC;AAGV0C,MAAAA,MAAM,EAAE3C;AAHE;AAHd,GAzBM,EAkCN;AACEuC,IAAAA,IAAI,EAAE,GADR;AAEEN,IAAAA,IAAI,EAAE,OAFR;AAGEO,IAAAA,UAAU,EAAE;AAAEC,MAAAA,OAAO,EAAE/C,KAAX;AAAkBgD,MAAAA,MAAM,EAAE3C,UAA1B;AAAsC4C,MAAAA,MAAM,EAAE3C;AAA9C,KAHd;AAIE4C,IAAAA,KAAK,EAAE;AACLF,MAAAA,MAAM,EAAE;AAAEG,QAAAA,aAAa,EAAE;AAAjB,OADH;AAELF,MAAAA,MAAM,EAAE;AAAEG,QAAAA,eAAe,EAAE;AAAnB;AAFH;AAJT,GAlCM,EA2CN;AACEP,IAAAA,IAAI,EAAE,UADR;AAEEN,IAAAA,IAAI,EAAE,SAFR;AAGEO,IAAAA,UAAU,EAAE;AAAEC,MAAAA,OAAO,EAAE9C,OAAX;AAAoB+C,MAAAA,MAAM,EAAE3C,UAA5B;AAAwC4C,MAAAA,MAAM,EAAE3C;AAAhD,KAHd;AAIE4C,IAAAA,KAAK,EAAE;AACLF,MAAAA,MAAM,EAAE;AAAEG,QAAAA,aAAa,EAAE;AAAjB,OADH;AAELF,MAAAA,MAAM,EAAE;AAAEG,QAAAA,eAAe,EAAE;AAAnB;AAFH;AAJT,GA3CM,EAoDN;AACEP,IAAAA,IAAI,EAAE,QADR;AAEEN,IAAAA,IAAI,EAAE,OAFR;AAGEc,IAAAA,WAAW,EAAElC,aAHf;AAIE2B,IAAAA,UAAU,EAAE;AAAEC,MAAAA,OAAO,EAAE7C;AAAX;AAJd,GApDM,EA2DN;AACE2C,IAAAA,IAAI,EAAE,eADR;AAEEN,IAAAA,IAAI,EAAE,cAFR;AAGEO,IAAAA,UAAU,EAAE;AAAEC,MAAAA,OAAO,EAAE5C;AAAX;AAHd,GA3DM,EAiEN;AACE0C,IAAAA,IAAI,EAAE,UADR;AAEEN,IAAAA,IAAI,EAAE,SAFR;AAGEO,IAAAA,UAAU,EAAE;AAAEE,MAAAA,MAAM,EAACrC,UAAT;AAAqBoC,MAAAA,OAAO,EAAE3C;AAA9B,KAHd;AAIEiD,IAAAA,WAAW,EAAElC,aAJf;AAKE+B,IAAAA,KAAK,EAAE;AALT,GAjEM,EAyEN;AACEL,IAAAA,IAAI,EAAE,iBADR;AAEEN,IAAAA,IAAI,EAAE,QAFR;AAGEO,IAAAA,UAAU,EAAE;AAAEE,MAAAA,MAAM,EAACrC,UAAT;AAAqBoC,MAAAA,OAAO,EAAE3C;AAA9B,KAHd;AAIEiD,IAAAA,WAAW,EAAElC,aAJf;AAKE+B,IAAAA,KAAK,EAAE;AALT,GAzEM,EAiFN;AACEL,IAAAA,IAAI,EAAE,iBADR;AAEEN,IAAAA,IAAI,EAAE,QAFR;AAGEO,IAAAA,UAAU,EAAE;AAAEE,MAAAA,MAAM,EAACrC,UAAT;AAAqBoC,MAAAA,OAAO,EAAE3C;AAA9B,KAHd;AAIEiD,IAAAA,WAAW,EAAElC,aAJf;AAKE+B,IAAAA,KAAK,EAAE;AALT,GAjFM,CAFW;AA4FnBI,EAAAA,cAAc,EAAE,wBAAAlC,EAAE,EAAI;AACpB,QAAIA,EAAE,CAACmC,IAAP,EAAa;AACX,aAAO;AAAEC,QAAAA,QAAQ,EAAEpC,EAAE,CAACmC;AAAf,OAAP;AACD,KAFD,MAEO;AACL,aAAO;AAAEE,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE;AAAX,OAAP;AACD;AACF;AAlGkB,CAAX,CAAT;AAqGD,eAAexC,MAAf","sourcesContent":["import Vue from \"vue\";\nimport Router from \"vue-router\";\nimport Index from \"./views/Index.vue\";\nimport Landing from \"./views/Landing.vue\";\nimport Login from \"./views/Login.vue\";\nimport SignIn from \"./views/SignIn.vue\";\nimport Profile from \"./views/Profile.vue\";\nimport MainNavbar from \"./layout/MainNavbar.vue\";\nimport MainFooter from \"./layout/MainFooter.vue\";\nimport Categoria from \"./views/myComponents/Categorias.vue\";\nimport Detalhes from \"./views/myComponents/DetalhesItem.vue\";\nimport FormCadastro from \"./views/myComponents/FormCadastroArtista.vue\";\nimport CadastroArtista from \"./views/myComponents/CadastroArtista.vue\";\nimport MainHeader from \"./layout/MainHeader.vue\"\nimport axios from \"axios\";\n\naxios.defaults.baseURL = process.env.VUE_APP_API_URL;\n\nlet router = null;\n\nfunction authenticated(to, from, next){\n  if(localStorage.getItem(\"token\") != null){\n    let formData = new FormData();\n    let token  = localStorage.getItem(\"token\").split(\" \");\n    formData.append('token', token[1]);\n\n    axios.post('/security', formData).then(response=>{\n      axios.post('/security/obter-perfil', formData).then(response=>{\n        let artist = response.data.filter((role=>{\n          return role.authority == \"ROLE_ARTISTA\"\n        }))\n\n        if(artist.length > 0){\n          if(to.name == \"login\"){\n            next(\"/profile\");\n          }      \n          next();\n        }else{\n          if(to.name == \"profile\"){\n            next(\"/categorias\");\n          }\n\n          next();\n        }\n      })\n    }).catch(()=>{\n      next(\"/login\");\n      localStorage.removeItem(\"token\")\n    })\n  }else{\n    if(to.name != \"login\"){\n      next(\"/login\");\n      localStorage.removeItem(\"token\")\n    }\n\n    next();\n  }\n}\n\nVue.use(Router);\n\n router = new Router({\n  mode:'history',\n  routes: [\n    {\n      path: \"/cadastrar-artista\",\n      name: \"CadastroArtista\",\n      components: {\n        default: CadastroArtista\n      }\n    },\n    {\n      path: \"/finalize-seu-cadastro/:id\",\n      name: \"formulario\",\n      components: {\n        default: FormCadastro,\n        header:MainHeader,\n        footer:MainFooter\n      }\n    },\n    {\n      path: \"/detalhes/:id\",\n      name: \"detalhes\",\n      components: {\n        header:MainHeader,\n        default: Detalhes\n      }\n    },\n    {\n      path: \"/categorias\",\n      name: \"categorias\",\n      components: {\n        header:MainHeader,\n        default: Categoria,\n        footer: MainFooter\n      }\n    },\n    {\n      path: \"/\",\n      name: \"index\",\n      components: { default: Index, header: MainNavbar, footer: MainFooter },\n      props: {\n        header: { colorOnScroll: 400 },\n        footer: { backgroundColor: \"black\" }\n      }\n    },\n    {\n      path: \"/landing\",\n      name: \"landing\",\n      components: { default: Landing, header: MainNavbar, footer: MainFooter },\n      props: {\n        header: { colorOnScroll: 400 },\n        footer: { backgroundColor: \"black\" }\n      }\n    },\n    {\n      path: \"/login\",\n      name: \"login\",\n      beforeEnter: authenticated,\n      components: { default: Login },\n     \n    },\n    {\n      path: \"/inscrever-se\",\n      name: \"inscrever-se\",\n      components: { default: SignIn },\n     \n    },\n    {\n      path: \"/profile\",\n      name: \"profile\",\n      components: { header:MainHeader, default: Profile },\n      beforeEnter: authenticated,\n      props: {\n      }\n    },\n    {\n      path: \"/profile/orders\",\n      name: \"orders\",\n      components: { header:MainHeader, default: Profile },\n      beforeEnter: authenticated,\n      props: {\n      }\n    },\n    {\n      path: \"/profile/videos\",\n      name: \"videos\",\n      components: { header:MainHeader, default: Profile },\n      beforeEnter: authenticated,\n      props: {\n      }\n    }\n  ],\n  scrollBehavior: to => {\n    if (to.hash) {\n      return { selector: to.hash };\n    } else {\n      return { x: 0, y: 0 };\n    }\n  }\n});\n\nexport default router;"]}]}